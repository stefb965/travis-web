<div class="main">
  <div class="wrapper {{if auth.signedIn 'non-centered' 'centered'}}">
    {{top-bar
      signIn=(route-action 'signIn')
      signOut=(route-action 'signOut')}}

    {{flash-display}}

    <div class="wrapper-main">
      <div id="main" role="main">
        {{#if isEmpty}}
          {{repos-empty}}
        {{else}}
          {{#if repo.isLoaded}}
            <article class="repo-header">
              <header>
                <h1 class="repo-title">{{#link-to "owner" repo.owner.login}}{{repo.owner.login}}{{/link-to}} / {{#link-to "repo" repo}}{{repo.name}}{{/link-to}}</h1>
                  <a href="{{urlGithub}}" title="{{repo.name}} on GitHub" class="repo-gh">
                    {{inline-svg 'icon-repooctocat'}}</a>
                  <div class="repo-badge">
                    <a href="#"  title="Latest push build on default branch: {{repo.defaultBranch.lastBuild.state}}"  {{action "toggleStatusBadgeModal"}}>
                      <img src={{statusImageUrl}} alt="build:{{repo.defaultBranch.lastBuild.state}}"/>
</a>
                  </div>
              </header>
              <main class="repo-main">
              <div class="repo-navigation">
                {{repo-show-tools repo=repo build=build job=job tab=tab onTriggerBuild=(action "toggleTriggerBuildModal")}}

                {{repo-show-tabs repo=repo tab=tab build=build job=job}}
              </div>
              <div class="travistab-body repo-body">
                {{outlet}}
              </div>
              </main>
            </article>

          {{else}}
            {{loading-indicator}}
          {{/if}}
        {{/if}}
      </div>
    </div>

    <aside id="left" class="{{unless auth.signedIn 'hidden'}}">
      {{outlet "left"}}
    </aside>

    {{#if auth.signedOut}}
      {{page-footer}}
    {{else if features.dashboard}}
      {{page-footer}}
    {{/if}}
  </div>
</div>

{{#if isShowingStatusBadgeModal}}
  {{#modal-dialog
     onClose="toggleStatusBadgeModal"
     targetAttachment="center"
     translucentOverlay=true}}
    {{status-images repo=repo onClose=(action 'toggleStatusBadgeModal')}}
  {{/modal-dialog}}
{{/if}}

{{#if isShowingTriggerBuildModal}}
  {{#modal-dialog
     onClose="toggleTriggerBuildModal"
     targetAttachment="center"
     translucentOverlay=true}}
    {{trigger-custom-build repo=repo onClose=(action 'toggleTriggerBuildModal')}}
  {{/modal-dialog}}
{{/if}}
